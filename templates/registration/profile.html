{% extends 'base.html' %}
{% block title %}Settings | SugarQube{% endblock %}

{% block content %}
<div class="max-w-7xl mx-auto">

    {% if not user.is_verified_buyer %}
    <div class="bg-yellow-100 border-l-4 border-yellow-500 text-yellow-800 p-4 rounded-md mb-6 flex justify-between items-center">
        <div class="flex items-center">
            <i data-feather="alert-circle" class="h-6 w-6 mr-3"></i>
            <p><span class="font-bold">Please confirm your identity.</span> Your account is not fully verified.</p>
        </div>
        <a href="#verification-steps" class="bg-yellow-500 text-white font-semibold py-2 px-4 rounded-lg hover:bg-yellow-600 transition-colors text-sm">
            Complete Profile
        </a>
    </div>
    {% endif %}

    <div class="flex flex-col md:flex-row md:space-x-8">
        <div class="md:w-1/4 flex-shrink-0">
            <h2 class="text-xl font-bold text-gray-800 mb-4">Settings</h2>
            <nav class="space-y-1">
                <a href="#" id="profile-tab-link" class="tab-link bg-green-100 text-green-700 group flex items-center px-3 py-2 text-sm font-medium rounded-md" aria-current="page">
                    <i data-feather="user" class="mr-3 h-5 w-5"></i>
                    Profile
                </a>
                <a href="#" id="security-tab-link" class="tab-link text-gray-600 hover:bg-gray-50 hover:text-gray-900 group flex items-center px-3 py-2 text-sm font-medium rounded-md">
                    <i data-feather="lock" class="mr-3 h-5 w-5"></i>
                    Security
                </a>
                <a href="#" id="account-type-tab-link" class="tab-link text-gray-600 hover:bg-gray-50 hover:text-gray-900 group flex items-center px-3 py-2 text-sm font-medium rounded-md">
                    <i data-feather="briefcase" class="mr-3 h-5 w-5"></i>
                    Account Type
                </a>
            </nav>
        </div>

        <div class="md:w-3/4 mt-8 md:mt-0">
            <div id="profile-tab-content">
                {% include 'registration/profile_tab.html' %}
            </div>
            <div id="security-tab-content" class="hidden">
                {% include 'registration/security_tab.html' %}
            </div>
            <div id="account-type-tab-content" class="hidden">
                {% include 'registration/account_type_tab.html' %}
            </div>
        </div>
    </div>
</div>

<script>
    document.addEventListener('DOMContentLoaded', function () {
        const tabs = document.querySelectorAll('.tab-link');
        const tabContents = {
            'profile-tab-link': document.getElementById('profile-tab-content'),
            'security-tab-link': document.getElementById('security-tab-content'),
            'account-type-tab-link': document.getElementById('account-type-tab-content'),
        };

        tabs.forEach(tab => {
            tab.addEventListener('click', (event) => {
                event.preventDefault();

                tabs.forEach(t => {
                    t.classList.remove('active', 'bg-green-100', 'text-green-700');
                    t.classList.add('text-gray-600', 'hover:bg-gray-50', 'hover:text-gray-900');
                });

                tab.classList.add('active', 'bg-green-100', 'text-green-700');
                tab.classList.remove('text-gray-600', 'hover:bg-gray-50', 'hover:text-gray-900');

                Object.values(tabContents).forEach(content => {
                    content.classList.add('hidden');
                });

                if (tabContents[tab.id]) {
                    tabContents[tab.id].classList.remove('hidden');
                }
            });
        });
    });
</script>
{% endblock %}